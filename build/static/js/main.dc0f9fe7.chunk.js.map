{"version":3,"sources":["components/Person.js","components/Persons.js","components/PersonForm.js","components/Filter.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Person","person","handler","name","number","onClick","Persons","persons","filter","filtered","includes","map","id","PersonForm","data","addNewName","newName","state","newNumber","handleNewNameChange","handlers","handleNewNumberChange","onSubmit","value","onChange","type","Filter","newFilter","handleFilter","baseUrl","axios","get","then","response","newObject","post","put","delete","status","Notification","emessage","message","className","App","useState","setNewName","setNewNumber","setFilter","setPersons","errorMessage","setErrorMessage","useEffect","personsService","initialPersons","catch","error","notiHandler","setTimeout","formControl","event","target","preventDefault","isPersonIn","find","rep","window","confirm","cPerson","rePersons","p","concat","sPersons","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.dc0f9fe7.chunk.js","sourcesContent":["import React from 'react'\n\nconst Person = ({ person, handler }) => {\n\n    return (\n        <li>\n            {person.name} {person.number}\n            <button onClick={handler}>Delete</button>\n        </li>\n    )\n}\n\nexport default Person","import React from 'react';\nimport Person from './Person'\n\n\nconst Persons = ({ persons, filter, handler }) => {\n    const filtered = persons.filter(person =>\n        person.name.includes(filter)\n    )\n    //console.log(filtered)\n    //console.log(handler)\n    return (\n        <div>\n            <ul>\n                {filtered.map(person =>\n                    <Person key={person.id} person={person} handler={() => handler(person.id)} />\n                )}\n\n            </ul>\n        </div>\n    )\n}\nexport default Persons","import React from 'react'\n\nconst PersonForm = ({ data, addNewName }) => {\n    const newName = data.state.newName\n    const newNumber = data.state.newNumber\n    const handleNewNameChange = data.handlers.handleNewNameChange\n    const handleNewNumberChange = data.handlers.handleNewNumberChange\n    return (\n        <form onSubmit={addNewName}>\n            <div>\n                name: <input value={newName} onChange={handleNewNameChange} />\n            </div>\n            <div>number: <input value={newNumber} onChange={handleNewNumberChange} /></div>\n            <div>\n                <button type=\"submit\">add</button>\n            </div>\n        </form>\n    )\n}\n\nexport default PersonForm","import React from 'react'\n\nconst Filter = ({ newFilter, handleFilter }) => {\n    return (\n        <div>\n            filter shown with <input value={newFilter} onChange={handleFilter} />\n        </div>\n    )\n}\n\nexport default Filter","import axios from \"axios\";\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl);\n    return request\n        .then((response) => {\n            return response.data;\n        })\n};\n\nconst create = (newObject) => {\n    const request = axios.post(baseUrl, newObject);\n    return request\n        .then((response) => {\n            return response.data;\n        })\n};\n\nconst update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject);\n    return request\n        .then((response) => {\n            return response.data;\n        })\n};\n\nconst del = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`);\n    return request\n        .then((response) => {\n            return response.status;\n        })\n}\n\n// eslint-disable-next-line\nexport default {\n    getAll,\n    create,\n    update,\n    del\n};\n","import React from 'react'\n\nconst Notification = ({ emessage }) => {\n    //console.log(\"1\", emessage)\n\n\n    if (emessage === null || emessage === '') {\n        return null\n    } else {\n        const message = emessage[0]\n        const type = emessage[1]\n        if (type === 'error') {\n            return (\n                <div className=\"error\">\n                    {message}\n                </div>\n            )\n        } else if (type === 'success') {\n            return (\n                <div className=\"success\">\n                    {message}\n                </div>\n            )\n        } else {\n            return (\n                <div>\n                    {message}\n                </div>\n            )\n        }\n    }\n\n\n}\n\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport Persons from './components/Persons'\nimport PersonForm from './components/PersonForm'\nimport Filter from './components/Filter'\nimport personsService from './services/persons'\nimport Notification from './components/Notification'\n\n\n\nconst App = () => {\n    const [newName, setNewName] = useState('')\n    const [newNumber, setNewNumber] = useState('')\n    const [newFilter, setFilter] = useState('')\n    const [persons, setPersons] = useState([])\n    const [errorMessage, setErrorMessage] = useState([])\n\n    const hook = () => {\n        //console.log('effect')\n        personsService\n            .getAll()\n            .then(initialPersons => {\n                //console.log('promise fulfilled')\n                //console.log(initialPersons)\n                setPersons(initialPersons)\n            }).catch(error => {\n                notiHandler(\n                    `cannot load from server`, 'error'\n                )\n            })\n    }\n    useEffect(hook, [])\n\n    const notiHandler = (message, type) => {\n        setErrorMessage(\n            [message, type]\n        )\n        setTimeout(() => {\n            setErrorMessage(null)\n        }, 5000)\n    }\n\n    const deleteHandler = (id) => {\n        const sPersons = persons.filter(p => p.id === id)\n        const result = window.confirm(`Delete ${sPersons[0].name} ?`);\n        if (result) {\n            personsService\n                .del(id)\n                .then(status => {\n                    //console.log('deleted', status)\n                    notiHandler(\n                        `deleted ${sPersons[0].name}`, 'success'\n                    )\n                    setPersons(persons.filter(p => p.id !== id))\n\n                })\n                .catch(error => {\n                    notiHandler(\n                        `cannot delete ${sPersons[0].name}`, 'error'\n                    )\n                })\n        }\n    }\n\n    const addNewName = (event) => {\n        event.preventDefault()\n        const isPersonIn = persons.find(person => person.name === newName)\n        const person = {\n            name: newName,\n            number: newNumber\n        }\n        if (!isPersonIn) {\n            personsService\n                .create(person)\n                .then(rePersons => {\n                    notiHandler(\n                        `Added ${person.name}`, 'success'\n                    )\n                    setPersons(persons.concat(rePersons))\n                    setNewName('')\n                    setNewNumber('')\n                })\n                .catch(error => {\n                    notiHandler(\n                        `${error.response.data.error}`, 'error'\n                    )\n                })\n\n        } else {\n            const rep = window.confirm(`${newName} is already added to phonebook, replace th old number with a new one?`)\n            const cPerson = { ...isPersonIn, number: newNumber }\n            if (rep) {\n                personsService\n                    .update(isPersonIn.id, cPerson)\n                    .then(rePersons => {\n                        notiHandler(`Updated ${cPerson.name} new number`, 'success')\n                        setPersons(persons.map(p => p.id !== isPersonIn.id ? p : rePersons))\n                        setNewName('')\n                        setNewNumber('')\n                    }).catch((error) => {\n                        notiHandler(`${cPerson.name} new number not saved to server, ${cPerson.name} was already removed from server`, 'error')\n                        setPersons(persons.filter(p => p.id !== cPerson.id))\n                        setNewName('')\n                        setNewNumber('')\n                    })\n            }\n        }\n    }\n\n    const handleNewNameChange = (event) => {\n        setNewName(event.target.value)\n    }\n    const handleNewNumberChange = (event) => {\n        setNewNumber(event.target.value)\n    }\n    const handleFilter = (event) => {\n        setFilter(event.target.value)\n    }\n    const formControl = {\n        state: {\n            newName: newName,\n            newNumber: newNumber\n        },\n        handlers: {\n            handleNewNameChange: handleNewNameChange,\n            handleNewNumberChange: handleNewNumberChange\n        }\n    }\n    return (\n        <div>\n            <h2>Phonebook</h2>\n            <Notification emessage={errorMessage} />\n            <Filter newFilter={newFilter} handleFilter={handleFilter} />\n\n            <h3>Add a new</h3>\n\n            <PersonForm\n                data={formControl}\n                addNewName={addNewName}\n            />\n\n            <h3>Numbers</h3>\n\n            <Persons persons={persons} filter={newFilter} handler={deleteHandler} />\n        </div>\n    )\n\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}