{"version":3,"sources":["components/Person.js","components/Persons.js","components/PersonForm.js","components/Filter.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Person","person","handler","name","number","onClick","Persons","persons","filter","filtered","includes","map","id","PersonForm","data","addNewName","newName","state","newNumber","handleNewNameChange","handlers","handleNewNumberChange","onSubmit","value","onChange","type","Filter","newFilter","handleFilter","baseUrl","request","axios","get","then","response","catch","error","console","log","newObject","post","put","delete","status","Notification","emessage","message","className","App","useState","setNewName","setNewNumber","setFilter","setPersons","errorMessage","setErrorMessage","useEffect","personsService","initialPersons","notiHandler","setTimeout","formControl","event","target","preventDefault","isPersonIn","find","rep","window","confirm","cPerson","rePersons","p","concat","sPersons","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.fcab0388.chunk.js","sourcesContent":["import React from 'react'\n\nconst Person = ({ person, handler }) => {\n\n    return (\n        <li>\n            {person.name} {person.number}\n            <button onClick={handler}>Delete</button>\n        </li>\n    )\n}\n\nexport default Person","import React from 'react';\nimport Person from './Person'\n\n\nconst Persons = ({ persons, filter, handler }) => {\n    const filtered = persons.filter(person =>\n        person.name.includes(filter)\n    )\n    //console.log(filtered)\n    //console.log(handler)\n    return (\n        <div>\n            <ul>\n                {filtered.map(person =>\n                    <Person key={person.id} person={person} handler={() => handler(person.id)} />\n                )}\n\n            </ul>\n        </div>\n    )\n}\nexport default Persons","import React from 'react'\n\nconst PersonForm = ({ data, addNewName }) => {\n    const newName = data.state.newName\n    const newNumber = data.state.newNumber\n    const handleNewNameChange = data.handlers.handleNewNameChange\n    const handleNewNumberChange = data.handlers.handleNewNumberChange\n    return (\n        <form onSubmit={addNewName}>\n            <div>\n                name: <input value={newName} onChange={handleNewNameChange} />\n            </div>\n            <div>number: <input value={newNumber} onChange={handleNewNumberChange} /></div>\n            <div>\n                <button type=\"submit\">add</button>\n            </div>\n        </form>\n    )\n}\n\nexport default PersonForm","import React from 'react'\n\nconst Filter = ({ newFilter, handleFilter }) => {\n    return (\n        <div>\n            filter shown with <input value={newFilter} onChange={handleFilter} />\n        </div>\n    )\n}\n\nexport default Filter","import axios from \"axios\";\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl);\n    return request\n        .then((response) => {\n            return response.data;\n        })\n        .catch((error) => {\n            console.log(\"P cannot load\", error);\n            return request\n        });\n};\n\nconst create = (newObject) => {\n    const request = axios.post(baseUrl, newObject);\n    return request\n        .then((response) => {\n            return response.data;\n        })\n        .catch((error) => {\n            console.log(\"fail\", error);\n        });\n};\n\nconst update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject);\n    return request\n        .then((response) => {\n            return response.data;\n        })\n        .catch((error) => {\n            return request\n        });\n};\n\nconst del = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`);\n    return request\n        .then((response) => {\n            return response.status;\n        })\n}\n\n// eslint-disable-next-line\nexport default {\n    getAll,\n    create,\n    update,\n    del\n};\n","import React from 'react'\n\nconst Notification = ({ emessage }) => {\n    //console.log(\"1\", emessage)\n\n\n    if (emessage === null || emessage === '') {\n        return null\n    } else {\n        const message = emessage[0]\n        const type = emessage[1]\n        if (type === 'error') {\n            return (\n                <div className=\"error\">\n                    {message}\n                </div>\n            )\n        } else if (type === 'success') {\n            return (\n                <div className=\"success\">\n                    {message}\n                </div>\n            )\n        } else {\n            return (\n                <div>\n                    {message}\n                </div>\n            )\n        }\n    }\n\n\n}\n\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport Persons from './components/Persons'\nimport PersonForm from './components/PersonForm'\nimport Filter from './components/Filter'\nimport personsService from './services/persons'\nimport Notification from './components/Notification'\n\n\n\nconst App = () => {\n    const [newName, setNewName] = useState('')\n    const [newNumber, setNewNumber] = useState('')\n    const [newFilter, setFilter] = useState('')\n    const [persons, setPersons] = useState([])\n    const [errorMessage, setErrorMessage] = useState([])\n\n    const hook = () => {\n        //console.log('effect')\n        personsService\n            .getAll()\n            .then(initialPersons => {\n                //console.log('promise fulfilled')\n                //console.log(initialPersons)\n                setPersons(initialPersons)\n            }).catch(error => {\n                notiHandler(\n                    `cannot load from server`, 'error'\n                )\n            })\n    }\n    useEffect(hook, [])\n\n    const notiHandler = (message, type) => {\n        setErrorMessage(\n            [message, type]\n        )\n        setTimeout(() => {\n            setErrorMessage(null)\n        }, 5000)\n    }\n\n    const deleteHandler = (id) => {\n        const sPersons = persons.filter(p => p.id === id)\n        const result = window.confirm(`Delete ${sPersons[0].name} ?`);\n        if (result) {\n            personsService\n                .del(id)\n                .then(status => {\n                    //console.log('deleted', status)\n                    notiHandler(\n                        `deleted ${sPersons[0].name}`, 'success'\n                    )\n                    setPersons(persons.filter(p => p.id !== id))\n\n                })\n                .catch(error => {\n                    notiHandler(\n                        `cannot delete ${sPersons[0].name}`, 'error'\n                    )\n                })\n        }\n    }\n\n    const addNewName = (event) => {\n        event.preventDefault()\n        const isPersonIn = persons.find(person => person.name === newName)\n        const person = {\n            name: newName,\n            number: newNumber\n        }\n        if (!isPersonIn) {\n            personsService\n                .create(person)\n                .then(rePersons => {\n                    //console.log(rePersons)\n                    //console.log('new person')\n\n                    notiHandler(\n                        `Added ${person.name}`, 'success'\n                    )\n\n                    setPersons(persons.concat(rePersons))\n                    setNewName('')\n                    setNewNumber('')\n                })\n                .catch(error => {\n                    notiHandler(\n                        `cannot add ${person.name}`, 'error'\n                    )\n                })\n\n        } else {\n            const rep = window.confirm(`${newName} is already added to phonebook, replace th old number with a new one?`)\n            const cPerson = { ...isPersonIn, number: newNumber }\n            if (rep) {\n                personsService\n                    .update(isPersonIn.id, cPerson)\n                    .then(rePersons => {\n                        notiHandler(`Updated ${cPerson.name} new number`, 'success')\n                        setPersons(persons.map(p => p.id !== isPersonIn.id ? p : rePersons))\n                        setNewName('')\n                        setNewNumber('')\n                    }).catch((error) => {\n                        notiHandler(`${cPerson.name} new number not saved to server, ${cPerson.name} was already removed from server`, 'error')\n                        setPersons(persons.filter(p => p.id !== cPerson.id))\n                        setNewName('')\n                        setNewNumber('')\n                    })\n            }\n        }\n    }\n\n    const handleNewNameChange = (event) => {\n        setNewName(event.target.value)\n    }\n    const handleNewNumberChange = (event) => {\n        setNewNumber(event.target.value)\n    }\n    const handleFilter = (event) => {\n        setFilter(event.target.value)\n    }\n    const formControl = {\n        state: {\n            newName: newName,\n            newNumber: newNumber\n        },\n        handlers: {\n            handleNewNameChange: handleNewNameChange,\n            handleNewNumberChange: handleNewNumberChange\n        }\n    }\n    return (\n        <div>\n            <h2>Phonebook</h2>\n            <Notification emessage={errorMessage} />\n            <Filter newFilter={newFilter} handleFilter={handleFilter} />\n\n            <h3>Add a new</h3>\n\n            <PersonForm\n                data={formControl}\n                addNewName={addNewName}\n            />\n\n            <h3>Numbers</h3>\n\n            <Persons persons={persons} filter={newFilter} handler={deleteHandler} />\n        </div>\n    )\n\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}