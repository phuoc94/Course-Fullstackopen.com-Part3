{"version":3,"sources":["components/Person.js","components/Persons.js","components/PersonForm.js","components/Filter.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Person","person","handler","name","number","onClick","Persons","persons","filter","filtered","includes","map","id","PersonForm","data","addNewName","newName","state","newNumber","handleNewNameChange","handlers","handleNewNumberChange","onSubmit","value","onChange","type","Filter","newFilter","handleFilter","baseUrl","request","axios","get","then","response","catch","error","console","log","newObject","post","put","delete","status","Notification","emessage","message","className","App","useState","setNewName","setNewNumber","setFilter","setPersons","errorMessage","setErrorMessage","useEffect","personsService","initialPersons","notiHandler","setTimeout","formControl","event","target","preventDefault","isPersonIn","find","rep","window","confirm","cPerson","rePersons","p","concat","sPersons","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.04f045e8.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Person = ({ person, handler }) => {\r\n\r\n    return (\r\n        <li>\r\n            {person.name} {person.number}\r\n            <button onClick={handler}>Delete</button>\r\n        </li>\r\n    )\r\n}\r\n\r\nexport default Person","import React from 'react';\r\nimport Person from './Person'\r\n\r\n\r\nconst Persons = ({ persons, filter, handler }) => {\r\n    const filtered = persons.filter(person =>\r\n        person.name.includes(filter)\r\n    )\r\n    //console.log(filtered)\r\n    //console.log(handler)\r\n    return (\r\n        <div>\r\n            <ul>\r\n                {filtered.map(person =>\r\n                    <Person key={person.id} person={person} handler={() => handler(person.id)} />\r\n                )}\r\n\r\n            </ul>\r\n        </div>\r\n    )\r\n}\r\nexport default Persons","import React from 'react'\r\n\r\nconst PersonForm = ({ data, addNewName }) => {\r\n    const newName = data.state.newName\r\n    const newNumber = data.state.newNumber\r\n    const handleNewNameChange = data.handlers.handleNewNameChange\r\n    const handleNewNumberChange = data.handlers.handleNewNumberChange\r\n    return (\r\n        <form onSubmit={addNewName}>\r\n            <div>\r\n                name: <input value={newName} onChange={handleNewNameChange} />\r\n            </div>\r\n            <div>number: <input value={newNumber} onChange={handleNewNumberChange} /></div>\r\n            <div>\r\n                <button type=\"submit\">add</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst Filter = ({ newFilter, handleFilter }) => {\r\n    return (\r\n        <div>\r\n            filter shown with <input value={newFilter} onChange={handleFilter} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Filter","import axios from \"axios\";\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl);\r\n    return request\r\n        .then((response) => {\r\n            return response.data;\r\n        })\r\n        .catch((error) => {\r\n            console.log(\"P cannot load\", error);\r\n            return request\r\n        });\r\n};\r\n\r\nconst create = (newObject) => {\r\n    const request = axios.post(baseUrl, newObject);\r\n    return request\r\n        .then((response) => {\r\n            return response.data;\r\n        })\r\n        .catch((error) => {\r\n            console.log(\"fail\", error);\r\n        });\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n    return request\r\n        .then((response) => {\r\n            return response.data;\r\n        })\r\n        .catch((error) => {\r\n            return request\r\n        });\r\n};\r\n\r\nconst del = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`);\r\n    return request\r\n        .then((response) => {\r\n            return response.status;\r\n        })\r\n}\r\n\r\n// eslint-disable-next-line\r\nexport default {\r\n    getAll,\r\n    create,\r\n    update,\r\n    del\r\n};\r\n","import React from 'react'\r\n\r\nconst Notification = ({ emessage }) => {\r\n    //console.log(\"1\", emessage)\r\n\r\n\r\n    if (emessage === null || emessage === '') {\r\n        return null\r\n    } else {\r\n        const message = emessage[0]\r\n        const type = emessage[1]\r\n        if (type === 'error') {\r\n            return (\r\n                <div className=\"error\">\r\n                    {message}\r\n                </div>\r\n            )\r\n        } else if (type === 'success') {\r\n            return (\r\n                <div className=\"success\">\r\n                    {message}\r\n                </div>\r\n            )\r\n        } else {\r\n            return (\r\n                <div>\r\n                    {message}\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default Notification","import React, { useState, useEffect } from 'react'\r\nimport Persons from './components/Persons'\r\nimport PersonForm from './components/PersonForm'\r\nimport Filter from './components/Filter'\r\nimport personsService from './services/persons'\r\nimport Notification from './components/Notification'\r\n\r\n\r\n\r\nconst App = () => {\r\n    const [newName, setNewName] = useState('')\r\n    const [newNumber, setNewNumber] = useState('')\r\n    const [newFilter, setFilter] = useState('')\r\n    const [persons, setPersons] = useState([])\r\n    const [errorMessage, setErrorMessage] = useState([])\r\n\r\n    const hook = () => {\r\n        //console.log('effect')\r\n        personsService\r\n            .getAll()\r\n            .then(initialPersons => {\r\n                //console.log('promise fulfilled')\r\n                //console.log(initialPersons)\r\n                setPersons(initialPersons)\r\n            }).catch(error => {\r\n                notiHandler(\r\n                    `cannot load from server`, 'error'\r\n                )\r\n            })\r\n    }\r\n    useEffect(hook, [])\r\n\r\n    const notiHandler = (message, type) => {\r\n        setErrorMessage(\r\n            [message, type]\r\n        )\r\n        setTimeout(() => {\r\n            setErrorMessage(null)\r\n        }, 5000)\r\n    }\r\n\r\n    const deleteHandler = (id) => {\r\n        const sPersons = persons.filter(p => p.id === id)\r\n        const result = window.confirm(`Delete ${sPersons[0].name} ?`);\r\n        if (result) {\r\n            personsService\r\n                .del(id)\r\n                .then(status => {\r\n                    //console.log('deleted', status)\r\n                    notiHandler(\r\n                        `deleted ${sPersons[0].name}`, 'success'\r\n                    )\r\n                    setPersons(persons.filter(p => p.id !== id))\r\n\r\n                })\r\n                .catch(error => {\r\n                    notiHandler(\r\n                        `cannot delete ${sPersons[0].name}`, 'error'\r\n                    )\r\n                })\r\n        }\r\n    }\r\n\r\n    const addNewName = (event) => {\r\n        event.preventDefault()\r\n        const isPersonIn = persons.find(person => person.name === newName)\r\n        const person = {\r\n            name: newName,\r\n            number: newNumber\r\n        }\r\n        if (!isPersonIn) {\r\n            personsService\r\n                .create(person)\r\n                .then(rePersons => {\r\n                    //console.log(rePersons)\r\n                    //console.log('new person')\r\n\r\n                    notiHandler(\r\n                        `Added ${person.name}`, 'success'\r\n                    )\r\n\r\n                    setPersons(persons.concat(rePersons))\r\n                    setNewName('')\r\n                    setNewNumber('')\r\n                })\r\n                .catch(error => {\r\n                    notiHandler(\r\n                        `cannot add ${person.name}`, 'error'\r\n                    )\r\n                })\r\n\r\n        } else {\r\n            const rep = window.confirm(`${newName} is already added to phonebook, replace th old number with a new one?`)\r\n            const cPerson = { ...isPersonIn, number: newNumber }\r\n            if (rep) {\r\n                personsService\r\n                    .update(isPersonIn.id, cPerson)\r\n                    .then(rePersons => {\r\n                        notiHandler(`Updated ${cPerson.name} new number`, 'success')\r\n                        setPersons(persons.map(p => p.id !== isPersonIn.id ? p : rePersons))\r\n                        setNewName('')\r\n                        setNewNumber('')\r\n                    }).catch((error) => {\r\n                        notiHandler(`${cPerson.name} new number not saved to server, ${cPerson.name} was already removed from server`, 'error')\r\n                        setPersons(persons.filter(p => p.id !== cPerson.id))\r\n                        setNewName('')\r\n                        setNewNumber('')\r\n                    })\r\n            }\r\n        }\r\n    }\r\n\r\n    const handleNewNameChange = (event) => {\r\n        setNewName(event.target.value)\r\n    }\r\n    const handleNewNumberChange = (event) => {\r\n        setNewNumber(event.target.value)\r\n    }\r\n    const handleFilter = (event) => {\r\n        setFilter(event.target.value)\r\n    }\r\n    const formControl = {\r\n        state: {\r\n            newName: newName,\r\n            newNumber: newNumber\r\n        },\r\n        handlers: {\r\n            handleNewNameChange: handleNewNameChange,\r\n            handleNewNumberChange: handleNewNumberChange\r\n        }\r\n    }\r\n    return (\r\n        <div>\r\n            <h2>Phonebook</h2>\r\n            <Notification emessage={errorMessage} />\r\n            <Filter newFilter={newFilter} handleFilter={handleFilter} />\r\n\r\n            <h3>Add a new</h3>\r\n\r\n            <PersonForm\r\n                data={formControl}\r\n                addNewName={addNewName}\r\n            />\r\n\r\n            <h3>Numbers</h3>\r\n\r\n            <Persons persons={persons} filter={newFilter} handler={deleteHandler} />\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}